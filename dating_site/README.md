# Установка

1. Для начала склонируйте репозиторий:
```
git clone git@github.com:elbrus-56/online_dating_site.git
```

2. Создайте виртуальное окружение:
```
py -m venv venv
```

3. Активируйте виртуальное окружение:
```
source venv/bin/activate
```

4. Установите необходимые зависимости из requirements.txt:
```
pip install -r requirements.txt
```

5. Время проводить миграции для базы данных:
```
py manage.py migrate
```

6. Чтобы использовать админ-панель, необходимо создать суперпользователя посредством
команды ```python manage.py createsuperuser```.

8. Далее мы запускаем сервер:
```
nohup python manage.py runserver 8000
```
gunicorn --bind 127.0.0.1:8000 config.wsgi

9. Либо перейдите в каталог online_dating_site и выполните команду docker-compose up


# О проекте

Задачи разбиты на отдельные сервисы. Docstrings написаны не в полном объеме, в
связи с ограничением времени.

Для возможности использования сервисов match_users и list_users
нужно пройти аутентификацию. Используется базовая аутентификация Django. 

Для идентификации пользователя используется поле email, вместо username

Админ на сервере уже создан для входа в админку django: 

user: admin@test.test
pass: 1220


Для просмотра документации перейдите по адресу: 127.0.0.1:8000/swagger/ или 127.0.0.1:8000/redoc/

Сервер: http://158.160.19.242/swagger/ или http://158.160.19.242/redoc/


Сервис регистрации пользователя:

1. Регистрация пользователя
http://158.160.19.242/api/clients/create/

2. Login
http://158.160.19.242/api/clients/login/

3. Logout
http://158.160.19.242/api/clients/logout/


Сервис получения списка пользователей с возможность фильтрации по полу, имени, фамилии,
расстоянию между пользователями.
Для определения расстояния между пользователями использована библиотека geopy

1. Получить список пользователей
http://158.160.19.242/api/list/


Сервис для поиска симпатий и отправки уведомлений на почту:
SMTP подключать я не стал для реальной отправки писем, использовал EMAIL_BACKEND
для отображения в потоке вывода. (В тестах работает)

1. Посмотреть пользователя
http://158.160.19.242/api/clients/{id}/match

id - идентификатор пользователя из таблицы User, id: int

http://158.160.19.242/api/clients/1/match

Меняешь id в url - получаешь нового участника


# Тесты

Тесты написаны не в полном объеме, в связи с ограничением времени. 

В сервисе match_user тест разбит на 2 части: сперва первый пользователь проходит аутентификацию,
ставит лайк и получает простое сообщение.
Затем второй пользователь проходит аутентификацию, ставит лайк в ответ первому и отрабатывает отправка 
почтовых уведомлений.

